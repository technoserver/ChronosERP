<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/WEB-INF/layout/layoutPadrao.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:erp="http://java.sun.com/jsf/composite/components"
>

    <ui:define name="title">
        Operadadora Cartão
    </ui:define>

    <ui:define name="tela">
        #{operadoraCartaoControll.titulo}
    </ui:define>
    <ui:define name="controle">
        Operadadora Cartão
    </ui:define>


    <ui:define name="gridDados">

        <erp:gridDados controller="#{operadoraCartaoControll}"
                       idDataTable="dataTableOperadoraCartao"
                       nomeFuncao="Operadora Cartão"
                       id="telaGrid"
        >

            <p:column headerText="Bandeira">
                <h:outputLabel
                        value="#{operadoraCartaoControll.keyFromValue(operadoraCartaoControll.bandeiras,row.bandeira)}"/>
            </p:column>
            <p:column headerText="nome">
                <h:outputLabel value="#{row.nome}"/>
            </p:column>
            <p:column headerText="Taxa Debito" styleClass="text-right">
                <h:outputLabel value="#{row.taxaAdmDebito}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputLabel>
            </p:column>


        </erp:gridDados>
    </ui:define>


    <ui:define name="telaInclusaoAlteracao">
        <erp:telaInclusaoAlteracao controller="#{operadoraCartaoControll}"
                                   nomeFuncao="Tipo Pagamento"
                                   id="telaDetalhe"
        >

            <div class="row">

                <erp:autoComplete styleClass="col-xs-12 col-sm-4 col-md-4"
                                  label="Conta Caixa"
                                  itemLabel="#{objeto.nome}"
                                  controller="#{operadoraCartaoControll}"
                                  completeMethod="getListaContaCaixa"
                                  nomeAtributo="#{operadoraCartaoControll.objeto .contaCaixa}"
                                  idComponente="contaCaixa"
                                  requerido="#{empty operadoraCartaoControll.objeto.id}"/>


                <erp:campoSelect styleClass="col-xs-12 col-sm-2 col-md-2"
                                 idComponente="naturezaFinanceiraTipo" label="Bandeira"
                                 nomeAtributo="#{operadoraCartaoControll.objeto.bandeira}"
                                 itens="#{operadoraCartaoControll.bandeiras}"/>


                <erp:campoTexto styleClass="col-xs-12 col-sm-4 col-md-4"
                                idComponente="finTipoPagamentoDescricao" label="Descricao"
                                nomeAtributo="#{operadoraCartaoControll.objeto.nome}"
                                tamanhoMaximo="50" requerido="true"
                />

                <erp:campoDecimal styleClass="col-xs-12 col-sm-2 col-md-2"
                                  id="taxaAdmDebito"
                                  idComponente="operadoraCartaotaxaAdmDebito"
                                  nomeAtributo="#{operadoraCartaoControll.objeto.taxaAdmDebito}"
                                  requerido="true"
                                  label="Taxa Debito"/>


            </div>
            <div class="row m-t">
                <div class="col-md-12">
                    <p:commandButton value="Add novo intervalo"
                                     styleClass="ui-priority-primary" process="@this"
                                     actionListener="#{operadoraCartaoControll.onAddNew()}"
                                     oncomplete="PF('listaOperadoraCartaoTaxas').addRow();"/>
                </div>
            </div>
            <div class="row m-t">


                <div class="col-md-12">

                    <p:dataTable id="listaOperadoraCartaoTaxas" widgetVar="listaOperadoraCartaoTaxas" var="row"
                                 value="#{operadoraCartaoControll.operadoraCartaoTaxas}" editable="true"
                                 style="margin-bottom:20px">


                        <p:ajax event="rowEdit" listener="#{operadoraCartaoControll.onRowEdit}"
                                update=":formCentro:mensagem"/>
                        <p:ajax event="rowEditCancel" listener="#{operadoraCartaoControll.onRowCancel}"
                                update=":formCentro:mensagem"/>
                        <p:column headerText="Intervalo inicial">

                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{row.intervaloInicial}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{row.intervaloInicial}" required="true">
                                        <p:keyFilter regEx="/[\d\-]/"/>
                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>

                        </p:column>
                        <p:column headerText="Intervalo final">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{row.intervaloFinal}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{row.intervaloFinal}" required="true">
                                        <p:keyFilter regEx="/[\d\-]/"/>
                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>


                        </p:column>
                        <p:column headerText="Taxa Adm" styleClass="text-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{row.taxaAdm}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber
                                            value="#{row.taxaAdm}"
                                            required="true"
                                            style="width: 100%;"
                                            decimalPlaces="2"
                                            maxValue="99.99"

                                    />
                                </f:facet>
                            </p:cellEditor>

                        </p:column>

                        <p:column headerText="intervalo de Crédito">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{row.creditoEm}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText value="#{row.creditoEm}" required="true">
                                        <p:keyFilter regEx="/[\d\-]/"/>
                                    </p:inputText>
                                </f:facet>
                            </p:cellEditor>


                        </p:column>

                        <p:column styleClass="text-center" width="50">
                            <p:rowEditor/>
                        </p:column>
                    </p:dataTable>

                </div>


            </div>


        </erp:telaInclusaoAlteracao>
    </ui:define>

</ui:composition>
