<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:erp="http://java.sun.com/jsf/composite/components"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <div class="row">

        <div class="col-xs-12 col-sm-4 col-md-4">
            <p:outputLabel value="Os Status" for="osAberturaOsStatus"/>
            <br/>
            <p:autoComplete id="osAberturaOsStatus"
                            value="#{osAberturaControll.objeto.osStatus}"
                            completeMethod="#{osAberturaControll.getListaOsStatus}"
                            var="osStatus" itemLabel="#{osStatus.nome}"
                            itemValue="#{osStatus}"
                            converter="defaultConverter"
                            forceSelection="true" minQueryLength="3" maxResults="10"
                            required="true" style="width: 100%"
                            emptyMessage="Nenhum registro encontrado"/>
        </div>
        <div class="col-xs-12 col-sm-4 col-md-4">
            <p:outputLabel value="Colaborador" for="osAberturaColaborador"/>
            <br/>
            <p:autoComplete id="osAberturaColaborador"
                            value="#{osAberturaControll.objeto.colaborador}"
                            completeMethod="#{osAberturaControll.getListaColaborador}"
                            var="colaborador" itemLabel="#{colaborador.pessoa.nome}"
                            itemValue="#{colaborador}"
                            converter="defaultConverter"
                            forceSelection="true" minQueryLength="3" maxResults="10"
                            required="true" style="width: 100%"
                            emptyMessage="Nenhum registro encontrado"/>
        </div>
        <div class="col-xs-12 col-sm-4 col-md-4">
            <p:outputLabel value="Cliente" for="osAberturaCliente"/>
            <br/>
            <p:autoComplete id="osAberturaCliente"
                            value="#{osAberturaControll.objeto.cliente}"
                            completeMethod="#{osAberturaControll.getListaCliente}"
                            var="cliente" itemLabel="#{cliente.pessoa.nome}"
                            itemValue="#{cliente}"
                            converter="defaultConverter"
                            forceSelection="true" minQueryLength="3" maxResults="10"
                            required="true" style="width: 100%"
                            emptyMessage="Nenhum registro encontrado"/>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-4 col-md-4">
            <p:outputLabel value="Condições Pagamento"
                           for="condicoesPagamento"/>
            <br/>
            <p:autoComplete id="condicoesPagamento"
                            value="#{osAberturaControll.objeto.condicoesPagamento}"
                            completeMethod="#{osAberturaControll.getListaVendaCondicoesPagamento}"
                            var="condicoesPagamento"
                            itemLabel="#{condicoesPagamento.nome}"
                            itemValue="#{condicoesPagamento}"
                            converter="defaultConverter" forceSelection="true"
                            minQueryLength="3" maxResults="10" required="true"
                            style="width: 100%" emptyMessage="Nenhum registro encontrado"/>
        </div>
        <erp:campoTexto styleClass="col-xs-12 col-sm-2 col-md-2"
                        idComponente="osAberturaNumero" label="Numero"
                        nomeAtributo="#{osAberturaControll.objeto.numero}"
                        tamanhoMaximo="20"
                        desabilitado="true"/>


        <erp:campoTexto styleClass="col-xs-12 col-sm-2 col-md-2"
                        idComponente="osAberturaFoneContato" label="Fone Contato"
                        nomeAtributo="#{osAberturaControll.objeto.foneContato}"
                        tamanhoMaximo="15"/>
        <erp:campoTexto styleClass="col-xs-12 col-sm-2 col-md-4"
                        idComponente="osAberturaNomeContato" label="Nome Contato"
                        nomeAtributo="#{osAberturaControll.objeto.nomeContato}"
                        tamanhoMaximo="50"/>
    </div>
    <div class="row">
        <erp:campoData styleClass="col-xs-12 col-sm-2 col-md-2"
                       idComponente="osAberturaDataInicio" label="Data Inicio"
                       nomeAtributo="#{osAberturaControll.objeto.dataInicio}"/>
        <erp:campoTexto styleClass="col-xs-12 col-sm-2 col-md-2"
                        idComponente="osAberturaHoraInicio" label="Hora Inicio"
                        nomeAtributo="#{osAberturaControll.objeto.horaInicio}"
                        tamanhoMaximo="8"/>
        <erp:campoData styleClass="col-xs-12 col-sm-2 col-md-2"
                       idComponente="osAberturaDataPrevisao" label="Data Previsao"
                       nomeAtributo="#{osAberturaControll.objeto.dataPrevisao}"/>
        <erp:campoTexto styleClass="col-xs-12 col-sm-2 col-md-2"
                        idComponente="osAberturaHoraPrevisao" label="Hora Previsao"
                        nomeAtributo="#{osAberturaControll.objeto.horaPrevisao}"
                        tamanhoMaximo="8"/>

    </div>

    <div class="row">
        <erp:campoAreaTexto styleClass="col-xs-12 col-sm-12 col-md-12"
                            idComponente="osAberturaObservacaoCliente"
                            label="Defeito apresentado/Observação"
                            nomeAtributo="#{osAberturaControll.objeto.observacaoCliente}"
                            linhas="8"/>

    </div>
    <div class="row">
        <erp:campoAreaTexto styleClass="col-xs-12 col-sm-12 col-md-12"
                            idComponente="osAberturaObservacaoAbertura"
                            label="Observacao Abertura"
                            nomeAtributo="#{osAberturaControll.objeto.observacaoAbertura}"
                            linhas="5"/>
    </div>

    <div class="ibox-footer">
        <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6 text-center">
                <p:commandButton value="Salvar"
                                 update=":formCentro:growl,:formCentro:mensagem,:formCentro:telaGrid:outputPanelGrid,:formCentro:telaDetalhe:outputPanelDetalhe"
                                 action="#{osAberturaControll.salvar}"
                                 rendered="#{empty osAberturaControll.objeto.id}">

                </p:commandButton>
                <c:if test="#{osAberturaControll.temProduto and !osAberturaControll.objeto.emitidoOrFaturado}">
                    <p:splitButton value="Salvar" actionListener="#{osAberturaControll.salvar}" icon="ui-icon-disk">
                        <p:menuitem value="Faturar" actionListener="#{osAberturaControll.faturar}"
                                    icon="ui-icon-arrowrefresh-1-w"/>
                        <p:menuitem value="Gerar NFe" actionListener="#{osAberturaControll.gerarNF}"
                                    icon="ui-icon-close"/>
                    </p:splitButton>
                </c:if>
            </div>
            <div class="#{osAberturaControll.objeto.emitidoOrFaturado?'col-xs-12 col-sm-12 col-md-12':'col-xs-6 col-sm-6 col-md-6'} text-center">
                <p:commandButton value="Cancelar" styleClass="default-btn"
                                 immediate="true"
                                 action="#{osAberturaControll.voltar}"
                                 update=":formCentro:telaGrid:outputPanelGrid,:formCentro:telaDetalhe:outputPanelDetalhe,navegacao,:formCentro:mensagem">

                </p:commandButton>
            </div>
        </div>

    </div>


</ui:composition>
